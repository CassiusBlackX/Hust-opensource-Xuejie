# 处理机调度

## 处理机的多级调度

### 确定数据结构

###  制定调度策略（调度原则）

###  给出调度算法

###  具体的实施处理机分派

## 作业调度

### 作业调度的内容

- 对存放在辅存设备上的大量作业，以一定的策略进行挑选，分配主存等必要的资源，建立作业对应的进程，使其投入运行。

	- 作业存储在辅存设备上
	- 在辅存中挑选一个作业,将其载入到主存.
	- 作业被载入到主存后,建立其对应的进程结构,使之投入运行.
	- 运行完毕,回到第二步

### 作业控制块JCB

- 存放作业控制和管理信息

### 作业调度算法的性能衡量

- 周转时间

	- 各作业提交给计算机系统到该作业的结果返回给用户所需要的时间。(从作业提交给计算机(存放在辅存)到结果返回给用户的时间)
	- 简单来说,可以理解为作业在磁盘中放置的时间+作业在主存中被运行的时间

- 带权周转时间

	- 作业周转时间/作业实际运行时间
	- (作业运行时间+作业在磁盘中等待被执行的时间)/作业运行时间

### 作业调度算法

- 先来先服务
- 选择一个运行时间最短的作业调入内存
- 响应比高者优先:

	- 响应时间(执行时间+作业等待了时间)/执行时间

- 优先调度算法
- 均衡调度算法

## 进程调度

### 对进入主存的所有进程，确定哪个进程在什么时候获得处理机，使用多长时间。

### 分成两种功能

- 调度

	- 组织和维护就绪进程队列

- 分派

	- 处理机空闲的时候,从就绪队列首部选取一个PCB投入运行

### 分成两种调度方式

- 非剥夺方式
- 剥夺方式

### 调度算法

- 进程优先数调度算法

	- 优先级最高的先被调度
	- 优先数可以是静态确定,还可以是动态确定,可以在系统运行的途中边运行边动态地调整进程的优先数.

- 循环轮转调度算法

	- 每个进程被调度到后，占用一个时间片，时间片用完后，该进程让出CPU，排在就绪队列的队尾。多个进程循环轮转。
	- 队列结构

		- I/O等待队列
		- 低优先队列:时间片到,进入低优先队列
		- 高优先队列:等待转就绪:高优先
		- 下一个进入的,只有高优先队列什么都没有,

## Unix进程调度

### Unix系统采用优先数调度算法

### 优先数计算公式

-  p_pri = min{127, (p_cpu/16-p_nice+PUSER)}
- p_cpu 进程占用CPU的程度R1:

	- R1=Tu/(Tu+Tnu)

		- Tu:进程创建后占用CPU的累计值
		- Tnu：进程生成后没有占用CPU的累计值

- p_nice 用户通过系统调用nice()设置的进程优先数
- PUSER 常数，其值为100

### 优先数低的,优先级越高,就优先考虑该进程执行

*XMind - Trial Version*